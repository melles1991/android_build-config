env:
    MANIFEST: https://github.com/LineageOS/android.git
    MANIFEST_BRANCH: lineage-19.1
    LOCAL_MANIFEST: https://github.com/melles1991/exodus_manifest.git
    LOCAL_BRANCH : lineage-19.1
    DEVICE: onclite
    # Not Recommended to Change
    
    SYNC_PATH: $HOME/work # Do NOT use "~". Use $HOME instead.
    CCACHE_SIZE: 30G
    CCACHE_DIR: $HOME/work/.ccache
    J_VAL: 16
    
    # Cirrus Specific Vars (Do *NOT* Change)
    CIRRUS_SHELL: bash

task:
  name: Build
  only_if: $CIRRUS_REPO_OWNER == 'melles1991'
  timeout_in: 6h
  container:
      image: ghcr.io/sushrut1101/docker:arch
      cpu: 8
      memory: 32G

  env_script:
    - env
    
  Build-Env-Setup_script:
    - pacman -S apt
    - apt update
    - apt install sudo
    - DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends tzdata
    - ln -sf /usr/share/zoneinfo/Asia/Kolkata /etc/localtime
    - apt-get install -y tzdata
    - dpkg-reconfigure --frontend noninteractive tzdata
    - sudo apt update -y && sudo apt install git aria2 curl wget rsync zip unzip lzma cpio ccache clang -y
    - sudo apt install python3 -y
    - sudo ln -sf /usr/bin/python3 /usr/bin/python
    - git config --global user.name "Sushrut1101"
    - git config --global user.email "guptasushrut@gmail.com"
    - git clone https://github.com/akhilnarang/scripts.git ~/scripts
    - cd ~/scripts
    - sudo bash setup/android_build_env.sh
    - cd ~  
    
  Sync_script:
    - bash sync.sh
    
  Build_script:
    - bash build.sh
    
